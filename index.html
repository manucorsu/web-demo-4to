<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spoticfy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <h1 class="titulo">Spoticfy</h1>
    </header>
    <h2>Ingresar datos</h2>
    <div class="ingreso-datos">
      <label for="album">Album:</label>
      <input type="text" id="album" name="album" /><br /><br />
      <label for="duracion">Duracion:</label>
      <input type="text" id="duracion" name="duracion" /><br /><br />
      <label for="nombre">Nombre cancion:</label>
      <input type="text" id="nombre" name="nombre" /><br /><br />
      <button id="guardar">Guardar canción</button>
    </div>

    <h2>Traer datos</h2>
    <div class="traer-datos">
      <strong>¿Traer qué?</strong>
      <select id="getWhatSelect">
        <option value="canciones" style="color: black">
          Todas las canciones
        </option>
        <option value="albumes" style="color: black">Todos los álbumes</option>
        <option value="artistas" style="color: black">
          Todos los artistas
        </option>
      </select>
      <button id="traer">Traer</button>
      <ul class="lista" id="lista1"></ul>
    </div>

    <script>
      function getAll(tipo) {
        if (tipo == "artistas" || tipo == "albumes" || tipo == "canciones") {
          let datos = [];
          const url = `http://spoticfy.vercel.app/${tipo}`; //Soy dueño de spoticfy.vercel.app, me siento tan poderoso
          fetch(url, { method: "GET" })
            .then((response) => response.json())
            .then((items) => {
              console.log("Fetcheé esto:", items);
              datos = items;
              datos.forEach((item) => {
                const newli = document.createElement("li");
                if (tipo == "canciones") {
                  newli.innerText = `${item.nombre} - ${item.artista} - ${item.album}`;
                }
                const img = document.createElement("img");
                img.className = "image-song";
                img.src = "song.jpg";
                newli.appendChild(img);
                lista.appendChild(newli);
              });
            });
        } else {
          console.error(`${tipo} no es un tipo válido para getAll!`);
        }
      }

      const lista = document.getElementById("lista1");
      const btnTraer = document.getElementById("traer");
      btnTraer.addEventListener("click", () => {
        const tipo = document.getElementById("getWhatSelect").value;
        getAll(tipo);
      });
    </script>
  </body>
</html>
